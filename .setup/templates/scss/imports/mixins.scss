/*
>>================================================================================>
Mixins
>>================================================================================>
*/

/*
 * Mixin: @hidden
 * --------------------------
 * https://snook.ca/archives/html_and_css/hiding-content-for-accessibility
 */

@mixin hidden() {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
    white-space: nowrap;
}

/*
 * Mixin: @centered
 * --------------------------
 * Absolutely-positioned elements become centered
 */

@mixin centered($axis) {
    position: absolute;
    
    @if $axis == 'y' {
        top: 50%;
        transform: translateY(-50%);
    } @else if $axis == 'x' {
        left: 50%;
        transform: translateX(-50%);
    } @else if $axis == 'xy' {
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
    }
}

/*
 * Mixin: @scrollable
 * --------------------------
 * Applies some styles that make scrollable elements behave a little better
 */

@mixin scrollable() {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    -ms-overflow-style: -ms-autohiding-scrollbar;
}

/*
 * Mixin:; @bgimg
 * --------------------------
 * Attaches a background image
 * User-defined width and height
 * Includes a boolean for 2x resolution
 * Ability to specify file extension
 */

@mixin bgimg($image, $width, $height, $retina, $extension) {
    background-image: url('../img/' + $image + '.' + $extension);
    background-repeat: no-repeat;
    background-position: center;
    background-size: $width + px $height + px;

    @if $retina == true {
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6/2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
            background-image: url('../img/' + $image  + '@2x' + '.' + $extension);
        }
    }
}

/*
 * Mixin:; @has_modals
 * --------------------------
 * Outputs necessary styles for implementation of modal windows
 */

 @mixin has_modals() {

    .modal {

        /*
        All Resolutions
        >>------------->
        */

        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: visibility 300ms ease-in-out, opacity 300ms ease-in-out;
        background-color: rgba(0,0,0,.6);

        @at-root .modal-overflow & {
            @include scrollable();
            
            .window {
                top: 20px;
                transform: translateX(-50%) !important;
                margin-bottom: 20px;
            }
        }

        .window {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            width: calc(100% - 40px);
            max-width: 720px;
            overflow: hidden;
            transition: margin 500ms ease, opacity 300ms ease-in-out, visibility 300ms ease-in-out;
            opacity: 0;
            visibility: hidden;
            margin-top: -50px;
        }

        &.active {
            visibility: visible;
            opacity: 1;

            .window {
                margin: 0;
                transform: translate(-50%,-50%);
                visibility: visible;
                opacity: 1;
            }
        }
        
        .content {
            background-color: rgba(255,255,255,.9);
        }

        .close {
            position: absolute;
            right: 10px;
            top: 10px;
            margin-left: auto;
            width: 45px;
            height: 45px;
            background-color: red;
        }

        /*
        Desktop
        >>------------->
        */

        @media screen and (min-width: $breakpoint_desktop) {
            .content {
               padding: 60px 30px 30px 30px;
            }
        }

        /*
        Mobile
        >>------------->
        */

        @media screen and (max-width: $breakpoint_mobile) {
            .content {
                padding: 60px 20px 20px 20px;
            }
        }
    }
}

/*
 * Mixin:; @has_columns
 * --------------------------
 * Outputs necessary styles for implementation of columns
 */

 @mixin has_columns() {

    .columns {
        
        /*
        Desktop
        >>------------->
        */

        @media screen and (min-width: 768px) {
            display: flex;
            flex-wrap: wrap;
            margin: 0 (-($gutter_normal / 2));

            > * {
                margin: 0 ($gutter_normal / 2);
            }

            > .col-50 {
                width: calc(50% - #{($gutter_normal)});

                &:nth-child(n+3) {
                    margin-top: $gutter_normal;
                }
            }

            &.has-small-gutter {
                margin: 0 (-($gutter_small / 2));

                > * {
                    margin: 0 ($gutter_small / 2);
                }

                > .col-50 {
                    width: calc(50% - #{($gutter_small)});

                    &:nth-child(n+3) {
                        margin-top: $gutter_small;
                    }
                }
            }
        }

        @media screen and (min-width: 1024px) {
            .col-33 {
                width: calc(33.333% - #{($gutter_normal)});

                &:nth-child(n+4) {
                    margin-top: $gutter_normal;
                }
            }

            &.has-small-gutter {
                > * {
                    margin: 0 ($gutter_small / 2);
                }

                > .col-33 {
                    width: calc(33.333% - #{($gutter_small)});

                    &:nth-child(n+4) {
                        margin-top: $gutter_small;
                    }
                }
            }
        }

        @media screen and (max-width: 1023px) and (min-width: 768px) {
            .col-33 {
                width: calc(50% - #{($gutter_normal)});

                &:nth-child(n+3) {
                    margin-top: $gutter_normal;
                }
            }

            &.has-small-gutter {
                > * {
                    margin: 0 ($gutter_small / 2);
                }

                > .col-33 {
                    width: calc(50% - #{($gutter_small)});

                    &:nth-child(n+3) {
                        margin-top: $gutter_small;
                    }
                }
            }
        }

        /*
        Mobile
        >>------------->
        */

        @media screen and (max-width: 767px) {
            > *:not(:last-child) {
                margin-bottom: $padding_mobile;
            }
        }
    }
}